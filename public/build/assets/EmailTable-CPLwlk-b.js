import{j as a,a as s}from"./app-C8xL1IzA.js";import{u as R}from"./useTrans-BkTq1qdy.js";import{S as T}from"./SelectableTable-DUw-H7ZP.js";import{S as D}from"./SearchBar-Bn4B_mxu.js";import{A as i}from"./ActionButton-yHeFLaE7.js";function $({emails:c,queryParams:d,type:l,source:u,folders:p=[]}){const{t}=R(),h=(e,n)=>{const r=n?"user.email-agent.bulk.unstar":"user.email-agent.bulk.star";s.patch(route(r),{ids:[e]},{preserveState:!0,preserveScroll:!0})},b=(e,n)=>{const r=n?"user.email-agent.bulk.mark-unread":"user.email-agent.bulk.mark-read";s.patch(route(r),{ids:[e]},{preserveState:!0,preserveScroll:!0})},o=(e,n)=>{s.patch(route("user.email-agent.bulk.update-folder",{folder:n}),{ids:[e]},{preserveState:!0,preserveScroll:!0})},m=e=>o(e,"spam"),f=e=>o(e,"bin"),x=e=>o(e,"inbox"),v=()=>{s.post(route("user.email-agent.get-gmail"),{},{preserveState:!0,preserveScroll:!0})},g=()=>{s.post(route("user.email-agent.get-outlook"),{},{preserveState:!0,preserveScroll:!0})},_=e=>{s.delete(route("user.email-agent.bulk.delete-permanently"),{data:{ids:[e]},preserveState:!0,preserveScroll:!0})},k=async e=>{s.patch(route("user.email-agent.bulk.mark-read"),{ids:e},{preserveState:!0,preserveScroll:!0})},j=async e=>{s.patch(route("user.email-agent.bulk.mark-unread"),{ids:e},{preserveState:!0,preserveScroll:!0})},S=async e=>{s.patch(route("user.email-agent.bulk.star"),{ids:e},{preserveState:!0,preserveScroll:!0})},N=async e=>{s.patch(route("user.email-agent.bulk.unstar"),{ids:e},{preserveState:!0,preserveScroll:!0})},w=async(e,n)=>{s.patch(route("user.email-agent.bulk.update-folder",{folder:n}),{ids:e},{preserveState:!0,preserveScroll:!0})},y=async e=>{s.delete(route("user.email-agent.bulk.delete-permanently"),{data:{ids:e},preserveState:!0,preserveScroll:!0})},C=()=>{const e=[{label:t("mark_as_read"),icon:"fa-solid fa-envelope-open",handler:k,variant:"green"},{label:t("mark_as_unread"),icon:"fa-solid fa-envelope",handler:j,variant:"green"},{label:t("add_star"),icon:"fa-solid fa-star",handler:S,variant:"green"},{label:t("remove_star"),icon:"fa-star fa-regular",handler:N,variant:"green"}];return p.filter(r=>r.name!==l).forEach(r=>{const M={label:t("move_to")+" "+r.name,icon:`fa-solid ${r.icon}`,handler:P=>w(P,r.name),variant:r.name==="spam"?"yellow":r.name==="bin"?"delete":"info",requiresConfirmation:["spam","bin"].includes(r.name),confirmMessageKey:r.name==="spam"?"confirm_move_to_spam":r.name==="bin"?"confirm_move_to_bin":"confirm_move_to_folder"};e.push(M)}),l==="bin"&&e.push({label:t("delete_permanently"),icon:"fa-solid fa-trash-can",handler:y,variant:"delete",requiresConfirmation:!0,confirmMessageKey:"confirm_permanent_delete_bulk"}),e},B=[{field:"row_number",label:t("serial"),icon:"fa-hashtag"},{field:"from",label:t("from"),icon:"fa-user"},{field:"subject",label:t("subject"),icon:"fa-envelope"},{field:"received_at",label:t("received_at"),icon:"fa-calendar"},{field:"actions",label:t("actions"),icon:"fa-gear",className:"flex justify-center"}],z=[{field:"id",label:t("id")},{field:"from_email",label:t("from")},{field:"subject",label:t("subject")},{field:"received_at",label:t("received_at")},{field:"created_at",label:t("created_at")},{field:"is_starred",label:t("starred")},{field:"is_read",label:t("read")}],A=e=>{const n=()=>{const r=[a.jsx(i,{href:route("user.email-agent.view",e.id),variant:"info",icon:"fa-eye",size:"xs",as:"a",children:t("view")},"view")];return l==="inbox"?r.push(a.jsx(i,{onClick:()=>m(e.id),variant:"warning",icon:"fa-exclamation-circle",size:"xs",as:"button",children:t("spam")},"spam"),a.jsx(i,{onClick:()=>f(e.id),variant:"delete",icon:"fa-trash-can",size:"xs",as:"button",children:t("bin")},"bin")):l==="spam"?r.push(a.jsx(i,{onClick:()=>x(e.id),variant:"success",icon:"fa-undo",size:"xs",as:"button",children:t("restore")},"restore"),a.jsx(i,{onClick:()=>f(e.id),variant:"delete",icon:"fa-trash-can",size:"xs",as:"button",children:t("bin")},"bin")):l==="bin"&&r.push(a.jsx(i,{onClick:()=>x(e.id),variant:"success",icon:"fa-undo",size:"xs",as:"button",children:t("restore")},"restore"),a.jsx(i,{onClick:()=>m(e.id),variant:"warning",icon:"fa-exclamation-circle",size:"xs",as:"button",children:t("spam")},"spam"),a.jsx(i,{onClick:()=>_(e.id),variant:"delete",icon:"fa-trash-can",size:"xs",as:"button",children:t("delete_permanently")},"delete")),r};return a.jsxs(a.Fragment,{children:[a.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-neutral-900 dark:text-neutral-100",children:e.row_number}),a.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"fa-solid fa-user text-blue-500"}),a.jsx("span",{className:`text-sm font-medium text-neutral-900 dark:text-neutral-100 ${e.is_read?"font-normal":"font-bold"}`,children:e.from_name||e.from_email})]}),e.from_name&&a.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 mx-6",children:e.from_email})]})}),a.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[e.is_starred&&a.jsx("i",{className:"fa-solid fa-star text-yellow-500"}),a.jsx("i",{className:"fa-solid fa-envelope text-green-500"}),a.jsx("span",{className:`text-sm text-neutral-900 dark:text-neutral-100 truncate max-w-xs ${e.is_read?"font-normal":"font-bold"}`,children:e.subject})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-neutral-500 dark:text-neutral-400",children:e.received_at||new Date(e.created_at).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("button",{onClick:()=>h(e.id,e.is_starred),className:"hover:scale-110 transition-transform duration-200",children:e.is_starred?a.jsx("i",{className:"fa-solid fa-star text-yellow-500 text-lg hover:text-yellow-600"}):a.jsx("i",{className:"fa-regular fa-star text-gray-400 text-lg hover:text-yellow-500"})}),a.jsx("button",{onClick:()=>b(e.id,e.is_read),className:"hover:scale-110 transition-transform duration-200",title:e.is_read?t("mark_as_unread"):t("mark_as_read"),children:e.is_read?a.jsx("i",{className:"fa-solid fa-envelope-open text-blue-500 text-lg hover:text-blue-600"}):a.jsx("i",{className:"fa-solid fa-envelope text-green-500 text-lg hover:text-green-600"})}),n()]})})]})},F=(e,n,r)=>r?"":e.is_read?"bg-neutral-50 dark:bg-neutral-900 hover:bg-neutral-100 dark:hover:bg-neutral-700":"bg-white dark:bg-neutral-800 hover:bg-blue-100/10 dark:hover:bg-blue-100/10";return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex justify-between items-center mb-4",children:a.jsx("h2",{className:"text-2xl font-bold leading-tight text-neutral-900 dark:text-neutral-100 flex items-center gap-2",children:t(l==="inbox"?"inbox_emails":l==="spam"?"spam_emails":l==="bin"?"bin_emails":"emails")})}),a.jsx("div",{className:"mb-4",children:a.jsx(D,{placeholder:t("search"),defaultValue:d.search||"",queryKey:"search",routeName:"user.email-agent.emails",routeParams:{folder:l},icon:"fa-magnifying-glass",pageParam:"page"})}),a.jsx(T,{columns:B,data:c.data,renderRow:A,pagination:c,routeName:"user.email-agent.emails",queryParams:{...d,folder:l},sortOptions:z,defaultSortField:"created_at",defaultSortDirection:"desc",getRowClassName:F,bulkActions:C(),pageParam:"page",MoreButtons:a.jsx(a.Fragment,{children:a.jsxs("div",{className:"flex gap-3 justify-center",children:[u==="gmail"&&a.jsx(i,{onClick:v,icon:"fa-envelope",variant:"delete",size:"sm",children:t("fetch_emails")}),u==="outlook"&&a.jsx(i,{onClick:g,icon:"fa-envelope-open",variant:"info",size:"sm",children:t("fetch_emails")})]})})})]})}export{$ as default};
