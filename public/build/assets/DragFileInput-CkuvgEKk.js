import{r as d,j as e}from"./app-m-EQOtSX.js";import{u as P}from"./useTrans-BkTq1qdy.js";function G({id:p,label:b,onChange:n,accept:f,error:k,required:F=!1,valid:w=!1,className:E="",helperText:_="",value:i=null,keyValue:u=null,disabled:l=!1,multiple:t=!1,maxFiles:j=5,...S}){const{t:a}=P(),o=d.useRef(null),[D,h]=d.useState(u?.name??null),[x,N]=d.useState(t?i||[]:null),[$,v]=d.useState(!1);d.useEffect(()=>{t?!i?.length&&o.current&&(o.current.value=""):!i&&o.current&&(o.current.value="")},[i,t]),d.useEffect(()=>{t?N(i||[]):h(u?.name??null)},[i,u,t]);const m=!!k,g=w&&!m,O=s=>{if(l)return 0;if(t){const r=Array.from(s.target.files);y(r)}else{const r=s.target.files[0];r&&(h(r.name),n&&n(r))}},y=s=>{if(!t||s.length===0)return;const r=[...x];s.forEach(c=>{r.length<j&&r.push(c)}),N(r),n&&n(r)},I=s=>{if(l||!t)return;const r=x.filter((c,M)=>M!==s);N(r),n&&n(r)},R=s=>{if(l)return 0;s.preventDefault(),v(!0)},A=s=>{s.preventDefault(),v(!1)},L=s=>{if(l)return 0;s.preventDefault(),v(!1);const r=Array.from(s.dataTransfer.files);if(t)y(r);else if(r.length>0){const c=r[0];h(c.name),n&&n(c)}},z=()=>{l||o.current?.click()};d.useEffect(()=>{t||h(u?.name??null)},[u,t]);const B=`
  ${l?"bg-gray-100 dark:bg-neutral-800 cursor-not-allowed":"bg-white dark:bg-neutral-900 cursor-pointer"}
    relative flex flex-col items-center justify-center p-8 border-2 border-dashed rounded-lg transition-colors
    ${$?"border-green-400 bg-green-50 dark:bg-green-900/20":m?"border-red-300 hover:border-red-400 dark:border-red-600 dark:hover:border-red-500":g?"border-green-300 hover:border-green-400 dark:border-green-600 dark:hover:border-green-500":"border-neutral-300 hover:border-neutral-400 dark:border-neutral-600 dark:hover:border-neutral-500"}
  `;return e.jsxs("div",{className:`mb-4 ${E}`,children:[b&&e.jsxs("label",{htmlFor:p,className:"block mb-2 text-neutral-900 dark:text-neutral-100",children:[b," ",F&&e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:B,onDragOver:R,onDragLeave:A,onDrop:L,onClick:z,children:[e.jsx("input",{ref:o,id:p,type:"file",accept:f,onChange:O,className:"hidden",disabled:l,multiple:t,...S}),e.jsx("div",{className:"mb-4",children:e.jsx("div",{children:e.jsx("i",{className:"fa-solid fa-cloud-upload-alt text-4xl text-green-500 mb-2"})})}),e.jsx("div",{className:"text-center",children:t?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-neutral-900 dark:text-neutral-100",children:[a("drag_drop_files_or")," ",e.jsx("span",{className:"underline text-green-600",children:a("choose_files")})]}),e.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:[a("you_can_upload_up_to")," ",j," ",a("files")]}),f&&e.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:[a("supported_formats"),": ",f]})]}):D?e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:[a("selected"),": ",D]}),e.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:a("click_to_change_file")})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-neutral-900 dark:text-neutral-100",children:[a("drag_drop_file_or")," ",e.jsx("span",{className:"underline text-green-600",children:a("choose_file")})]}),f&&e.jsxs("p",{className:"text-xs text-neutral-600 dark:text-neutral-400",children:[a("supported_formats"),": ",f]})]})})]}),g&&e.jsx("div",{className:"absolute transform -translate-y-1/2 right-3 top-1/2",children:e.jsx("i",{className:"fa-solid fa-check-circle text-green-500"})})]}),t&&x?.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:[a("selected_files")," (",x.length,"/",j,"):"]}),e.jsx("div",{className:"space-y-1 max-h-40 overflow-y-auto",children:x.map((s,r)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-neutral-50 dark:bg-neutral-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-file text-green-500 text-sm"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 truncate max-w-xs",children:s.name}),e.jsxs("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:[(s.size/(1024*1024)).toFixed(2)," MB"]})]})]}),e.jsx("button",{type:"button",onClick:c=>{c.stopPropagation(),I(r)},className:"p-1 text-neutral-400 hover:text-red-500 transition-colors",disabled:l,children:e.jsx("i",{className:"fa-solid fa-times"})})]},r))})]}),_&&!m&&!g&&e.jsx("div",{className:"mt-1 text-sm text-neutral-600 dark:text-neutral-400",children:_}),m&&e.jsx("div",{className:"mt-1 text-sm text-red-600 dark:text-red-400",children:k}),g&&!m&&e.jsx("div",{className:"mt-1 text-sm text-green-600 dark:text-green-400",children:t?`${x?.length||0} ${a("files_uploaded_success")}`:a("file_uploaded_success")})]})}export{G as D};
