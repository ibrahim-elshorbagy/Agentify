import{r as p,j as e,u as _,H as w,L as v}from"./app-CjNAdBBo.js";import{A as E}from"./AppLayout-MOERJ5Ir.js";import{u as F}from"./useTrans-BkTq1qdy.js";import{I,a as S}from"./InputLabel-D2ulROH1.js";import{T as g}from"./TextInput-DYa5hl-D.js";import{P as A}from"./PrimaryButton-Dy0JTlO7.js";import{S as C}from"./SecondaryButton-SV3u6fB9.js";import"./ApplicationLogo-HeaGSkwN.js";import"./Toastify-DnBJHK8t.js";p.forwardRef(function({className:m="",...s},c){const o=p.useRef(null);return p.useImperativeHandle(c,()=>({focus:()=>o.current?.focus()})),e.jsx("input",{...s,type:"checkbox",className:"h-4 w-4 rounded border-2 border-neutral-300 dark:border-neutral-600 bg-neutral-50 dark:bg-neutral-800 text-green-600 focus:ring-2 focus:ring-green-200 dark:focus:ring-green-900 focus:border-green-500 dark:focus:border-green-400 transition-all cursor-pointer"+(s.disabled?" opacity-60 cursor-not-allowed bg-neutral-200 dark:bg-neutral-700":"")+(m?` ${m}`:""),ref:o})});function O({plan:d,features:m}){const{t:s}=F(),{data:c,setData:o,put:f,errors:h,processing:b}=_({price:d.price||"",features:d.features?.map(t=>({id:t.id,limit_value:t.pivot?.limit_value??(t.type==="boolean"?0:""),active:t.pivot?.active??!0}))||[]}),j=t=>{t.preventDefault(),f(route("admin.plans.update",d.id),{preserveScroll:!0})},y=(t,r,l,x)=>{o(a=>{let i=l;if(a.features.some(n=>n.id===t))return{...a,features:a.features.map(n=>n.id===t?{...n,[r]:i}:n)};{const n={id:t,limit_value:"",active:!0};return n[r]=i,{...a,features:[...a.features,n]}}})},u=m.map(t=>{const r=d.features.find(l=>l.id===t.id);return{...t,limit_value:r?.pivot?.limit_value??(t.type==="boolean"?0:null),active:r?.pivot?.active??!1}}),k={email_agent:{title:"ðŸ“§ Email Agent",key:"email_agent",features:u.filter(t=>t.key.startsWith("email_agent"))},email_smart_answer:{title:"ðŸ¤– Email Smart Answer",key:"email_smart_answer",features:u.filter(t=>t.key.startsWith("email_smart_answer"))},reports:{title:"ðŸ“Š Reports Agent",key:"reports",features:u.filter(t=>t.key.startsWith("reports"))},hr:{title:"ðŸ‘¨â€ðŸ’¼ HR Agent",key:"hr",features:u.filter(t=>t.key.startsWith("hr"))}},N=t=>u.filter(l=>l.key.startsWith(t)).every(l=>c.features.find(a=>a.id===l.id)?.active??l.active);return e.jsxs(E,{children:[e.jsx(w,{title:`${s("edit_plan")} - ${d.name_value}`}),e.jsx("div",{className:"m-3 xl:m-5",children:e.jsx("div",{className:"overflow-hidden rounded-2xl shadow-lg dark:bg-neutral-900 border border-neutral-300 dark:border-neutral-700",children:e.jsxs("div",{className:"p-6 text-neutral-900 dark:text-neutral-100",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(v,{href:route("admin.plans.index"),className:"flex items-center text-neutral-600 hover:text-neutral-900 dark:text-neutral-400 dark:hover:text-neutral-100 transition-colors",children:[e.jsx("i",{className:"fa-solid fa-arrow-left rtl:rotate-180 mx-2"}),s("plans")]}),e.jsx("span",{className:"text-neutral-400 dark:text-neutral-600",children:"/"}),e.jsxs("h1",{className:"text-2xl font-bold leading-tight text-neutral-900 dark:text-neutral-100",children:[e.jsx("i",{className:"fa-solid fa-edit text-green-500 mx-2"}),s("edit_plan")," - ",d.name_value]})]})}),e.jsxs("form",{onSubmit:j,className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:e.jsxs("div",{children:[e.jsx(I,{htmlFor:"price",value:s("plan_price")}),e.jsx(g,{id:"price",type:"number",name:"price",value:c.price,className:"mt-1 block w-1/2",onChange:t=>o("price",t.target.value),step:"0.01",min:"0",required:!0}),e.jsx(S,{message:h.price,className:"mt-2"})]})}),e.jsx("div",{className:"mt-8 space-y-10",children:Object.values(k).map(t=>t.features.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h3",{className:"text-lg font-semibold flex items-center",children:t.title})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm border border-neutral-300 dark:border-neutral-700 rounded-lg",children:[e.jsx("thead",{className:"bg-neutral-100 dark:bg-neutral-800",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 w-1/2 py-2 rtl:text-right ltr:text-left",children:s("feature")}),e.jsx("th",{className:"px-4 w-1/2 py-2 rtl:text-right ltr:text-left",children:s("limit_value")})]})}),e.jsx("tbody",{children:t.features.map((r,l)=>{const x=c.features.find(i=>i.id===r.id);c.features.findIndex(i=>i.id===r.id),x?.active??r.active;const a=N(t.key);return e.jsxs("tr",{className:`border-t border-neutral-200 dark:border-neutral-700 ${a?"":"opacity-50"}`,children:[e.jsxs("td",{className:"px-4 py-2 font-medium relative group cursor-help",children:[e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{children:r.name_value})}),e.jsx("div",{className:"absolute z-10 hidden group-hover:block bg-green-500 text-white text-xs rounded px-2 py-1 w-90 top-1 ltr:right-0 rtl:left-0",children:r.description_value})]}),e.jsx("td",{className:"px-4 py-2",children:r.type==="boolean"?e.jsx("div",{className:"flex items-center gap-2"}):e.jsx(g,{type:"number",value:x?.limit_value??"",onChange:i=>y(r.id,"limit_value",i.target.value),className:"w-24",min:"0",disabled:!a,placeholder:a?"0":"Disabled"})})]},r.id)})})]})})]},t.title))}),e.jsxs("div",{className:"flex items-center justify-end gap-4 pt-6 border-t border-neutral-200 dark:border-neutral-700",children:[e.jsx(C,{icon:"fa-times",as:v,href:route("admin.plans.index"),children:s("cancel")}),e.jsx(A,{icon:"fa-save",type:"submit",disabled:b,children:s(b?"updating":"save_changes")})]})]})]})})})]})}export{O as default};
