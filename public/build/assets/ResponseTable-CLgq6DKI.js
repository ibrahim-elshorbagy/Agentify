import{j as t,a as s}from"./app-Dp3qKNdL.js";import{u as k}from"./useTrans-BkTq1qdy.js";import{S}from"./SelectableTable-2AG4iFDQ.js";import{A as n}from"./ActionButton-COsplS7M.js";function y({emails:l,queryParams:i,type:r}){const{t:a}=k(),o=async e=>{s.delete(route("user.email-agent.response.bulk.delete-drafts"),{data:{ids:e},preserveState:!0,preserveScroll:!0})},c=async e=>{s.patch(route("user.email-agent.response.bulk.send-drafts"),{ids:e},{preserveState:!0,preserveScroll:!0})},u=async e=>{s.delete(route("user.email-agent.response.bulk.delete-sent"),{data:{ids:e},preserveState:!0,preserveScroll:!0})},f=()=>r==="draft"?[{label:a("send_drafts"),icon:"fa-solid fa-paper-plane",handler:c,variant:"green",requiresConfirmation:!0,confirmMessageKey:"confirm_send_drafts"},{label:a("delete_drafts"),icon:"fa-solid fa-trash-can",handler:o,variant:"delete",requiresConfirmation:!0,confirmMessageKey:"confirm_delete_drafts"}]:r==="sent"?[{label:a("delete"),icon:"fa-solid fa-trash-can",handler:u,variant:"delete",requiresConfirmation:!0,confirmMessageKey:"confirm_delete_sent_messages"}]:[],m=[{field:"row_number",label:a("serial"),icon:"fa-hashtag"},{field:"to_email",label:a("to"),icon:"fa-user"},{field:"from_email",label:a("from"),icon:"fa-user"},...r==="sent"?[{field:"sent_at",label:a("sent_at"),icon:"fa-calendar"}]:[{field:"created_at",label:a("created_at"),icon:"fa-calendar"}],{field:"actions",label:a("actions"),icon:"fa-gear",className:"flex justify-center"}],x=[{field:"to_email",label:a("to")},{field:"from_email",label:a("from")},...r==="sent"?[{field:"sent_at",label:a("sent_at")}]:[],{field:"created_at",label:a("created_at")}],p=e=>{s.patch(route("user.email-agent.response.bulk.send-drafts"),{ids:[e]},{preserveState:!0,preserveScroll:!0})},g=e=>{s.delete(route("user.email-agent.response.bulk.delete-drafts"),{data:{ids:[e]},preserveState:!0,preserveScroll:!0})},h=e=>{s.delete(route("user.email-agent.response.bulk.delete-sent"),{data:{ids:[e]},preserveState:!0,preserveScroll:!0})},b=e=>t.jsxs(t.Fragment,{children:[t.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-neutral-900 dark:text-neutral-100",children:e.row_number}),t.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("i",{className:"fa-solid fa-user text-blue-500"}),t.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:e.to_name||e.to_email})]}),e.to_name&&t.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 mx-6",children:e.to_email})]})}),t.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("i",{className:"fa-solid fa-user text-green-500"}),t.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:e.from_name||e.from_email})]}),e.from_name&&t.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 mx-6",children:e.from_email})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-neutral-500 dark:text-neutral-400",children:r==="sent"?new Date(e.sent_at||e.created_at).toLocaleDateString():new Date(e.created_at).toLocaleDateString()}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx(n,{href:route("user.email-agent.view",e.message.id),variant:"info",icon:"fa-eye",size:"xs",as:"a",children:a("view")}),r==="draft"&&t.jsxs(t.Fragment,{children:[t.jsx(n,{onClick:()=>p(e.id),variant:"success",icon:"fa-paper-plane",size:"xs",as:"button",children:a("send")}),t.jsx(n,{onClick:()=>g(e.id),variant:"delete",icon:"fa-trash-can",size:"xs",as:"button",children:a("delete")})]}),r==="sent"&&t.jsx(n,{onClick:()=>h(e.id),variant:"delete",icon:"fa-trash-can",size:"xs",as:"button",children:a("delete")})]})})]}),_=(e,d,v)=>v?"":r==="draft"?d%2===0?"bg-emerald-50/70 dark:bg-emerald-900/30":"bg-emerald-100/60 dark:bg-emerald-800/20":d%2===0?"bg-green-100/60 dark:bg-green-800/30":"bg-green-50/80 dark:bg-green-900/20",j=r==="sent"?"user.email-agent.sent.emails":"user.email-agent.draft.emails";return t.jsx(S,{columns:m,data:l.data,renderRow:b,pagination:l,routeName:j,sortOptions:x,defaultSortField:"created_at",defaultSortDirection:"desc",getRowClassName:_,bulkActions:f(),pageParam:`${r}_page`,queryParams:i})}export{y as default};
