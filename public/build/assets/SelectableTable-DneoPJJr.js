import{j as e,L as V,r as o,a as L}from"./app-CnrbIJI9.js";import{A as O}from"./ActionButton-BoCP_nlC.js";import{u as H}from"./useTrans-BkTq1qdy.js";function W({links:g}){return e.jsx("nav",{className:"mt-6 mb-4 flex justify-center items-center gap-1",children:g?.map((s,d)=>e.jsx(V,{preserveScroll:!0,href:s.url||"#",dangerouslySetInnerHTML:{__html:s.label},className:`inline-flex justify-center items-center h-8 min-w-8 px-3 rounded-lg text-sm transition-colors
                        ${s.active?"bg-green-500 text-white font-medium":""}
                        ${s.url?"text-neutral-700 dark:text-neutral-300 hover:bg-green-100 dark:hover:bg-green-900/30 hover:text-green-700 dark:hover:text-green-300":"text-neutral-400 dark:text-neutral-600 cursor-not-allowed"}
                    `},d))})}function X({onSort:g,sortField:s,sortDirection:d,perPage:u=15,totalItems:b=0,onPerPageChange:k,selectedItems:i=[],onSelectAll:j,bulkActions:v=[],onBulkAction:M,sortOptions:w=[],queryParams:T={},routeName:m,showSelection:U=!0,pageParam:z="page",MoreButtons:E=null}){const{t:n}=H(),[p,S]=o.useState(!1),[A,x]=o.useState(!1),[h,N]=o.useState(!1),y=[10,25,50,100],P=r=>{let l="asc";if(r===s&&d==="asc"&&(l="desc"),g)g(r,l);else if(m){let f={...Object.fromEntries(new URLSearchParams(window.location.search))};f.sort=r,f.direction=l,f[z]=1,L.get(route(m,route().params),f,{preserveState:!0,replace:!0})}x(!1)},B=r=>{if(k)k(r);else if(m){let l={...Object.fromEntries(new URLSearchParams(window.location.search))};l.per_page=r,l[z]=1,L.get(route(m,route().params),l,{preserveState:!0,replace:!0})}S(!1)},C=r=>{if(i.length!==0){if(r.requiresConfirmation){const l=r.confirmMessageKey?n(r.confirmMessageKey,{count:i.length}):r.confirmMessage||n("confirm_action",{count:i.length});if(!confirm(l))return}M(r,i),N(!1)}};o.useEffect(()=>{const r=()=>{S(!1),x(!1),N(!1)};return document.addEventListener("click",r),()=>{document.removeEventListener("click",r)}},[]);const $=r=>{r.stopPropagation()};return e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-4 text-sm",children:[e.jsx("div",{className:"flex items-center gap-2",children:U&&i.length>0?e.jsx("div",{className:"flex items-center gap-2",children:v.length>0&&e.jsxs("div",{className:"relative",onClick:$,children:[e.jsxs(O,{variant:"primary",icon:"fa-list-check",size:"sm",onClick:r=>{r.stopPropagation(),N(!h)},children:[n("bulk_actions")," (",i.length,")"]}),h&&e.jsx("div",{className:"absolute ltr:left-0 z-10 mt-1 w-48 rounded-lg shadow-lg bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700",children:e.jsx("div",{className:"py-1",children:v.map((r,l)=>e.jsxs("button",{className:`flex items-center w-full px-4 py-2 gap-2 ltr:text-left rtl:text-right text-sm hover:bg-neutral-100 dark:hover:bg-neutral-700 ${r.variant==="delete"?"text-red-600 dark:text-red-400":r.variant==="green"?"text-green-600 dark:text-green-400":r.variant==="blue"?"text-blue-600 dark:text-blue-400":r.variant==="yellow"?"text-yellow-600 dark:text-yellow-400":"text-neutral-700 dark:text-neutral-200"}`,onClick:()=>C(r),children:[r.icon&&e.jsx("i",{className:` ${r.icon}`}),r.label]},l))})})]})}):e.jsxs("div",{className:"text-neutral-500 dark:text-neutral-400",children:[b," ",n(b!==1?"items":"item")]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[E,w.length>0&&e.jsxs("div",{className:"relative",onClick:$,children:[e.jsxs(O,{variant:"primary",icon:"fa-sort",size:"sm",onClick:r=>{r.stopPropagation(),x(!A)},children:[n("sort"),s&&e.jsxs("span",{className:"hidden sm:inline ml-1",children:[n("by")," ",n(s)," ",d==="asc"?`↑ ${n("ascending")}`:`↓ ${n("descending")}`]})]}),A&&e.jsx("div",{className:"absolute right-0 z-10 mt-1 w-48 rounded-lg shadow-lg bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700",children:e.jsx("div",{className:"py-1",children:w.map(r=>e.jsxs("button",{className:`flex items-center w-full px-4 py-2 gap-2 text-left text-sm hover:bg-neutral-100 dark:hover:bg-neutral-700 ${s===r.field?"text-green-600 dark:text-green-400":"text-neutral-700 dark:text-neutral-200"}`,onClick:()=>P(r.field),children:[r.label,s===r.field&&e.jsx("i",{className:` fa-solid ${d==="asc"?"fa-arrow-up":"fa-arrow-down"}`})]},r.field))})})]}),e.jsxs("div",{className:"relative",onClick:$,children:[e.jsxs(O,{variant:"primary",icon:"fa-list-ol",size:"sm",className:"bg-neutral-200 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-300 hover:bg-neutral-300 dark:hover:bg-neutral-600",onClick:r=>{r.stopPropagation(),S(!p)},children:[e.jsx("span",{children:u})," ",n("per_page")]}),p&&e.jsx("div",{className:"absolute right-0 z-10 mt-1 w-36 rounded-lg shadow-lg bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700",children:e.jsx("div",{className:"py-1",children:y.map(r=>e.jsx("button",{className:`flex w-full px-4 py-2 text-left text-sm hover:bg-neutral-100 dark:hover:bg-neutral-700 ${u===r?"text-green-600 dark:text-green-400":"text-neutral-700 dark:text-neutral-200"}`,onClick:()=>B(r),children:r},r))})})]})]})]})}function F({columns:g,data:s,onRowClick:d=null,routeName:u,queryParams:b={},renderRow:k=null,idField:i="id",pagination:j=null,onSort:v=null,bulkActions:M=[],sortOptions:w=[],defaultSortField:T=null,defaultSortDirection:m="asc",perPageOptions:U=[10,25,50,100],defaultPerPage:z=15,getRowClassName:E=null,showSelection:n=!0,pageParam:p="page",MoreButtons:S=null}){const{t:A}=H(),[x,h]=o.useState([]),[N,y]=o.useState(!1),[P,B]=o.useState(T||""),[C,$]=o.useState(m),[r,l]=o.useState(b.per_page||15);o.useEffect(()=>{h([]),y(!1)},[s]);const f=t=>{h(a=>{const c=t[i];return a.includes(c)?a.filter(q=>q!==c):[...a,c]})},R=()=>{N||x.length===s.length?(h([]),y(!1)):(h(s.map(t=>t[i])),y(!0))},K=(t,a)=>{if(B(t),$(a),v)v(t,a);else if(u){let c={...Object.fromEntries(new URLSearchParams(window.location.search))};c.sort=t,c.direction=a,c[p]=1,L.get(route(u,route().params),c,{preserveState:!0,replace:!0})}},D=t=>{if(l(t),u){let a={...Object.fromEntries(new URLSearchParams(window.location.search))};a.per_page=t,a[p]=1,L.get(route(u,route().params),a,{preserveState:!0,replace:!0})}},G=async(t,a)=>{t.handler&&(await t.handler(a),h([]))};return e.jsxs(e.Fragment,{children:[e.jsx(X,{onSort:K,sortField:P,sortDirection:C,perPage:r,totalItems:j?j.total:s.length,onPerPageChange:D,selectedItems:x,onSelectAll:R,bulkActions:M,onBulkAction:G,sortOptions:w,queryParams:b,routeName:u,pageParam:p,MoreButtons:S}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("table",{className:"w-full text-sm rtl:text-right ltr:text-left text-neutral-800 dark:text-neutral-200",children:[e.jsx("thead",{className:"text-neutral-700 uppercase border-b-2 border-green-300 dark:border-green-600 bg-green-100/80 dark:bg-green-900/50 dark:text-neutral-300",children:e.jsxs("tr",{children:[n&&e.jsx("th",{className:"py-2 px-3 w-10",children:e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-green-600 bg-green-50 border-green-300 rounded focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-neutral-800 dark:focus:ring-offset-neutral-800 focus:ring-2 dark:bg-green-900/50 dark:border-green-600",checked:s.length>0&&x.length===s.length,onChange:R})})}),g.map(t=>e.jsx("th",{className:`py-2 px-3 font-semibold text-nowrap ${t.className||""}`,children:e.jsxs("div",{className:"flex items-center gap-1",children:[t.icon&&e.jsx("i",{className:`fa-solid ${t.icon}`}),e.jsx("span",{children:t.label}),w.find(a=>a.field===t.field)&&e.jsx("button",{className:"ml-1",onClick:()=>K(t.field,P===t.field&&C==="asc"?"desc":"asc"),children:P===t.field?e.jsx("i",{className:`fa-solid fa-sort-${C==="asc"?"up":"down"} text-green-500`}):e.jsx("i",{className:"fa-solid fa-sort text-neutral-400"})})]})},t.field))]})}),e.jsx("tbody",{children:s.length>0?s.map((t,a)=>{const c=x.includes(t[i]),q=E?E(t,a,c):"",J=a%2===0?"bg-green-50/80 dark:bg-green-900/20":"bg-green-100/60 dark:bg-green-800/30";return e.jsxs("tr",{className:`transition-colors ${q||J} border-b border-green-200/50 dark:border-green-700/50 ${c?"bg-green-100/90 dark:bg-green-800/30":""} ${d?"cursor-pointer":""}`,onClick:d?()=>d(t):void 0,children:[n&&e.jsx("td",{className:"px-3 py-2",onClick:_=>{_.stopPropagation(),f(t)},children:e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-green-600 bg-green-50 border-green-300 rounded focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-neutral-800 dark:focus:ring-offset-neutral-800 focus:ring-2 dark:bg-green-900/50 dark:border-green-600",checked:c,onChange:()=>{}})})}),k?k(t,c,f):g.map((_,Q)=>e.jsx("td",{className:"px-3 py-2",children:_.render?_.render(t):t[_.accessor]||"-"},Q))]},t[i])}):e.jsx("tr",{children:e.jsxs("td",{colSpan:g.length+1,className:"px-3 py-2 text-center text-neutral-500 dark:text-neutral-400",children:[e.jsx("i",{className:"fa-regular fa-face-frown"})," ",A("no_items_found")]})})})]})}),j&&e.jsx(W,{links:j.links})]})}export{F as S};
