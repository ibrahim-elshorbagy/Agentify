import{r as x,u as v,j as t}from"./app-BuSRZe6U.js";import{u as _}from"./useTrans-BkTq1qdy.js";import{A as D}from"./AppModal-BQtqkHN7.js";import{P as N}from"./PrimaryButton-CeqstmZe.js";import{S as k}from"./SecondaryButton-CKNM7dPz.js";import{D as B}from"./DragFileInput-Bqz96B5W.js";function y({isOpen:n,onClose:i,file:l}){const{t:r}=_(),[o,a]=x.useState(null),{data:C,setData:m,post:p,processing:s,errors:h,reset:c}=v({file:null,_method:"PUT"}),g=e=>{a(e),m("file",e)},j=e=>{e.preventDefault(),l&&p(route("user.report-agent.files.update",l.id),{forceFormData:!0,onSuccess:()=>{c(),a(null),i()}})},d=()=>{s||(c(),a(null),i())};if(x.useEffect(()=>{n||a(null)},[n]),!l)return null;const b=e=>{if(e===0)return"0 Bytes";const u=1024,S=["Bytes","KB","MB","GB"],f=Math.floor(Math.log(e)/Math.log(u));return parseFloat((e/Math.pow(u,f)).toFixed(2))+" "+S[f]},F=e=>e.includes("pdf")?"fa-file-pdf text-red-500":e.includes("word")||e.includes("document")?"fa-file-word text-blue-500":e.includes("sheet")||e.includes("excel")?"fa-file-excel text-green-600":e.includes("text")?"fa-file-alt text-neutral-500":"fa-file text-neutral-500";return t.jsx(D,{isOpen:n,onClose:d,title:r("replace_file"),icon:"fa-edit",size:"md",children:t.jsxs("form",{onSubmit:j,children:[t.jsxs("div",{className:"mb-6 p-4 bg-neutral-50 dark:bg-neutral-800 rounded-lg",children:[t.jsx("h4",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 mb-3",children:r("current_file")}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 rounded bg-neutral-200 dark:bg-neutral-700 flex items-center justify-center",children:t.jsx("i",{className:`fa-solid ${F(l.mime_type)} text-lg`})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:l.original_name}),t.jsx("p",{className:"text-xs text-neutral-500 dark:text-neutral-400",children:b(l.file_size)})]})]})]}),t.jsx(B,{id:"file-replace",label:r("choose_replacement_file"),multiple:!1,accept:".pdf,.doc,.docx,.txt,.xlsx,.xls,.csv",onChange:g,value:o,disabled:s,error:h.file,helperText:"PDF, DOC, DOCX, TXT, XLS, XLSX, CSV files are supported"}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(k,{type:"button",onClick:d,disabled:s,children:r("cancel")}),t.jsx(N,{type:"submit",icon:"fa-save",disabled:s||!o,children:r(s?"replacing":"replace_file")})]})]})})}export{y as default};
