import{j as t,a as s}from"./app-BQL--bpA.js";import{u as j}from"./useTrans-BkTq1qdy.js";import{S as k}from"./SelectableTable-D8vmAFAD.js";import{A as n}from"./ActionButton-CAzTYYQk.js";function C({emails:l,queryParams:o,type:r}){const{t:a}=j(),i=async e=>{s.delete(route("user.email-agent.response.bulk.delete-drafts"),{data:{ids:e},preserveState:!0,preserveScroll:!0})},d=async e=>{s.patch(route("user.email-agent.response.bulk.send-drafts"),{ids:e},{preserveState:!0,preserveScroll:!0})},c=async e=>{s.delete(route("user.email-agent.response.bulk.delete-sent"),{data:{ids:e},preserveState:!0,preserveScroll:!0})},u=()=>r==="draft"?[{label:a("send_drafts"),icon:"fa-solid fa-paper-plane",handler:d,variant:"green",requiresConfirmation:!0,confirmMessageKey:"confirm_send_drafts"},{label:a("delete_drafts"),icon:"fa-solid fa-trash-can",handler:i,variant:"delete",requiresConfirmation:!0,confirmMessageKey:"confirm_delete_drafts"}]:r==="sent"?[{label:a("delete"),icon:"fa-solid fa-trash-can",handler:c,variant:"delete",requiresConfirmation:!0,confirmMessageKey:"confirm_delete_sent_messages"}]:[],f=[{field:"row_number",label:a("serial"),icon:"fa-hashtag"},{field:"to_email",label:a("to"),icon:"fa-user"},{field:"from_email",label:a("from"),icon:"fa-user"},...r==="sent"?[{field:"sent_at",label:a("sent_at"),icon:"fa-calendar"}]:[{field:"created_at",label:a("created_at"),icon:"fa-calendar"}],{field:"actions",label:a("actions"),icon:"fa-gear",className:"flex justify-center"}],m=[{field:"to_email",label:a("to")},{field:"from_email",label:a("from")},...r==="sent"?[{field:"sent_at",label:a("sent_at")}]:[],{field:"created_at",label:a("created_at")}],x=e=>{s.patch(route("user.email-agent.response.bulk.send-drafts"),{ids:[e]},{preserveState:!0,preserveScroll:!0})},p=e=>{s.delete(route("user.email-agent.response.bulk.delete-drafts"),{data:{ids:[e]},preserveState:!0,preserveScroll:!0})},h=e=>{s.delete(route("user.email-agent.response.bulk.delete-sent"),{data:{ids:[e]},preserveState:!0,preserveScroll:!0})},g=e=>t.jsxs(t.Fragment,{children:[t.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-neutral-900 dark:text-neutral-100",children:e.row_number}),t.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("i",{className:"fa-solid fa-user text-blue-500"}),t.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:e.to_name||e.to_email})]}),e.to_name&&t.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 mx-6",children:e.to_email})]})}),t.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:t.jsxs("div",{className:"flex flex-col",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("i",{className:"fa-solid fa-user text-green-500"}),t.jsx("span",{className:"text-sm font-medium text-neutral-900 dark:text-neutral-100",children:e.from_name||e.from_email})]}),e.from_name&&t.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 mx-6",children:e.from_email})]})}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-neutral-500 dark:text-neutral-400",children:r==="sent"?new Date(e.sent_at||e.created_at).toLocaleDateString():new Date(e.created_at).toLocaleDateString()}),t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx(n,{href:route("user.email-agent.view",e.message.id),variant:"info",icon:"fa-eye",size:"xs",as:"a",children:a("view")}),r==="draft"&&t.jsxs(t.Fragment,{children:[t.jsx(n,{onClick:()=>x(e.id),variant:"success",icon:"fa-paper-plane",size:"xs",as:"button",children:a("send")}),t.jsx(n,{onClick:()=>p(e.id),variant:"delete",icon:"fa-trash-can",size:"xs",as:"button",children:a("delete")})]}),r==="sent"&&t.jsx(n,{onClick:()=>h(e.id),variant:"delete",icon:"fa-trash-can",size:"xs",as:"button",children:a("delete")})]})})]}),b=(e,w,v)=>v?"":r==="draft"?"bg-yellow-50 dark:bg-yellow-900/20 hover:bg-yellow-100 dark:hover:bg-yellow-800/30":"bg-neutral-50 dark:bg-neutral-900 hover:bg-neutral-100 dark:hover:bg-neutral-700",_=r==="sent"?"user.email-agent.sent.emails":"user.email-agent.draft.emails";return t.jsx(k,{columns:f,data:l.data,renderRow:g,pagination:l,routeName:_,sortOptions:m,defaultSortField:"created_at",defaultSortDirection:"desc",getRowClassName:b,bulkActions:u(),pageParam:`${r}_page`,queryParams:o})}export{C as default};
