import{j as a,a as s}from"./app-dnX27HDg.js";import{u as T}from"./useTrans-BkTq1qdy.js";import{S as F}from"./SelectableTable-BbHVcjPK.js";import{S as R}from"./SearchBar-aPwxt36G.js";import{A as o}from"./ActionButton-jOuYUoID.js";function E({emails:d,queryParams:u,type:t,source:m}){const{t:r}=T(),g=(e,n)=>{const l=n?"user.email-agent.bulk.unstar":"user.email-agent.bulk.star";s.patch(route(l),{ids:[e]},{preserveState:!0,preserveScroll:!0})},_=(e,n)=>{const l=n?"user.email-agent.bulk.mark-unread":"user.email-agent.bulk.mark-read";s.patch(route(l),{ids:[e]},{preserveState:!0,preserveScroll:!0})},i=(e,n)=>{s.patch(route("user.email-agent.bulk.update-folder",{folder:n}),{ids:[e]},{preserveState:!0,preserveScroll:!0})},f=e=>i(e,"spam"),x=e=>i(e,"bin"),b=e=>i(e,"inbox"),k=()=>{s.post(route("user.email-agent.get-gmail"),{},{preserveState:!0,preserveScroll:!0})},j=()=>{s.post(route("user.email-agent.get-outlook"),{},{preserveState:!0,preserveScroll:!0})},S=e=>{s.delete(route("user.email-agent.bulk.delete-permanently"),{data:{ids:[e]},preserveState:!0,preserveScroll:!0})},y=async e=>{s.patch(route("user.email-agent.bulk.mark-read"),{ids:e},{preserveState:!0,preserveScroll:!0})},N=async e=>{s.patch(route("user.email-agent.bulk.mark-unread"),{ids:e},{preserveState:!0,preserveScroll:!0})},w=async e=>{s.patch(route("user.email-agent.bulk.star"),{ids:e},{preserveState:!0,preserveScroll:!0})},C=async e=>{s.patch(route("user.email-agent.bulk.unstar"),{ids:e},{preserveState:!0,preserveScroll:!0})},c=async(e,n)=>{s.patch(route("user.email-agent.bulk.update-folder",{folder:n}),{ids:e},{preserveState:!0,preserveScroll:!0})},p=async e=>c(e,"spam"),h=async e=>c(e,"bin"),v=async e=>c(e,"inbox"),B=async e=>{s.delete(route("user.email-agent.bulk.delete-permanently"),{data:{ids:e},preserveState:!0,preserveScroll:!0})},M=()=>{const e=[{label:r("mark_as_read"),icon:"fa-solid fa-envelope-open",handler:y,variant:"green"},{label:r("mark_as_unread"),icon:"fa-solid fa-envelope",handler:N,variant:"green"},{label:r("add_star"),icon:"fa-solid fa-star",handler:w,variant:"green"},{label:r("remove_star"),icon:"fa-star fa-regular",handler:C,variant:"green"}];return t==="inbox"?e.push({label:r("move_to_spam"),icon:"fa-solid fa-exclamation-circle",handler:p,variant:"yellow",requiresConfirmation:!0,confirmMessageKey:"confirm_move_to_spam"},{label:r("move_to_bin"),icon:"fa-solid fa-trash-can",handler:h,variant:"delete",requiresConfirmation:!0,confirmMessageKey:"confirm_move_to_bin"}):t==="spam"?e.push({label:r("restore_to_inbox"),icon:"fa-solid fa-undo",handler:v,variant:"blue",requiresConfirmation:!0,confirmMessageKey:"confirm_restore_emails"},{label:r("move_to_bin"),icon:"fa-solid fa-trash-can",handler:h,variant:"delete",requiresConfirmation:!0,confirmMessageKey:"confirm_move_to_bin"}):t==="bin"&&e.push({label:r("restore_to_inbox"),icon:"fa-solid fa-undo",handler:v,variant:"blue",requiresConfirmation:!0,confirmMessageKey:"confirm_restore_emails"},{label:r("move_to_spam"),icon:"fa-solid fa-exclamation-circle",handler:p,variant:"yellow",requiresConfirmation:!0,confirmMessageKey:"confirm_move_to_spam"},{label:r("delete_permanently"),icon:"fa-solid fa-trash-can",handler:B,variant:"delete",requiresConfirmation:!0,confirmMessageKey:"confirm_permanent_delete_bulk"}),e},z=[{field:"row_number",label:r("serial"),icon:"fa-hashtag"},{field:"from",label:r("from"),icon:"fa-user"},{field:"subject",label:r("subject"),icon:"fa-envelope"},{field:"received_at",label:r("received_at"),icon:"fa-calendar"},{field:"actions",label:r("actions"),icon:"fa-gear",className:"flex justify-center"}],q=[{field:"id",label:r("id")},{field:"from_email",label:r("from")},{field:"subject",label:r("subject")},{field:"received_at",label:r("received_at")},{field:"created_at",label:r("created_at")},{field:"is_starred",label:r("starred")},{field:"is_read",label:r("read")}],A=e=>{const n=()=>{const l=[a.jsx(o,{href:route("user.email-agent.view",e.id),variant:"info",icon:"fa-eye",size:"xs",as:"a",children:r("view")},"view")];return t==="inbox"?l.push(a.jsx(o,{onClick:()=>f(e.id),variant:"warning",icon:"fa-exclamation-circle",size:"xs",as:"button",children:r("spam")},"spam"),a.jsx(o,{onClick:()=>x(e.id),variant:"delete",icon:"fa-trash-can",size:"xs",as:"button",children:r("bin")},"bin")):t==="spam"?l.push(a.jsx(o,{onClick:()=>b(e.id),variant:"success",icon:"fa-undo",size:"xs",as:"button",children:r("restore")},"restore"),a.jsx(o,{onClick:()=>x(e.id),variant:"delete",icon:"fa-trash-can",size:"xs",as:"button",children:r("bin")},"bin")):t==="bin"&&l.push(a.jsx(o,{onClick:()=>b(e.id),variant:"success",icon:"fa-undo",size:"xs",as:"button",children:r("restore")},"restore"),a.jsx(o,{onClick:()=>f(e.id),variant:"warning",icon:"fa-exclamation-circle",size:"xs",as:"button",children:r("spam")},"spam"),a.jsx(o,{onClick:()=>S(e.id),variant:"delete",icon:"fa-trash-can",size:"xs",as:"button",children:r("delete_permanently")},"delete")),l};return a.jsxs(a.Fragment,{children:[a.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-neutral-900 dark:text-neutral-100",children:e.row_number}),a.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("i",{className:"fa-solid fa-user text-blue-500"}),a.jsx("span",{className:`text-sm font-medium text-neutral-900 dark:text-neutral-100 ${e.is_read?"font-normal":"font-bold"}`,children:e.from_name||e.from_email})]}),e.from_name&&a.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 mx-6",children:e.from_email})]})}),a.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[e.is_starred&&a.jsx("i",{className:"fa-solid fa-star text-yellow-500"}),a.jsx("i",{className:"fa-solid fa-envelope text-green-500"}),a.jsx("span",{className:`text-sm text-neutral-900 dark:text-neutral-100 truncate max-w-xs ${e.is_read?"font-normal":"font-bold"}`,children:e.subject})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-neutral-500 dark:text-neutral-400",children:new Date(e.received_at||e.created_at).toLocaleDateString()}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-center gap-2",children:[a.jsx("button",{onClick:()=>g(e.id,e.is_starred),className:"hover:scale-110 transition-transform duration-200",children:e.is_starred?a.jsx("i",{className:"fa-solid fa-star text-yellow-500 text-lg hover:text-yellow-600"}):a.jsx("i",{className:"fa-regular fa-star text-gray-400 text-lg hover:text-yellow-500"})}),a.jsx("button",{onClick:()=>_(e.id,e.is_read),className:"hover:scale-110 transition-transform duration-200",title:e.is_read?r("mark_as_unread"):r("mark_as_read"),children:e.is_read?a.jsx("i",{className:"fa-solid fa-envelope-open text-blue-500 text-lg hover:text-blue-600"}):a.jsx("i",{className:"fa-solid fa-envelope text-green-500 text-lg hover:text-green-600"})}),n()]})})]})},K=(e,n,l)=>l?"":e.is_read?"bg-neutral-50 dark:bg-neutral-900 hover:bg-neutral-100 dark:hover:bg-neutral-700":"bg-white dark:bg-neutral-800 hover:bg-blue-100/10 dark:hover:bg-blue-100/10";return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex justify-between items-center mb-4",children:a.jsxs("h2",{className:"text-2xl font-bold leading-tight text-neutral-900 dark:text-neutral-100 flex items-center gap-2",children:[a.jsx("i",{className:`fa-solid ${t==="inbox"?"fa-inbox text-blue-500":t==="spam"?"fa-exclamation-circle text-orange-500":t==="bin"?"fa-trash text-gray-500":"fa-inbox text-blue-500"}`}),r(t==="inbox"?"inbox_emails":t==="spam"?"spam_emails":t==="bin"?"bin_emails":"emails")]})}),a.jsx("div",{className:"mb-4",children:a.jsx(R,{placeholder:r("search"),defaultValue:u.search||"",queryKey:"search",routeName:"user.email-agent.emails",routeParams:{folder:t},icon:"fa-magnifying-glass",pageParam:"page"})}),a.jsx(F,{columns:z,data:d.data,renderRow:A,pagination:d,routeName:"user.email-agent.emails",queryParams:{...u,folder:t},sortOptions:q,defaultSortField:"created_at",defaultSortDirection:"desc",getRowClassName:K,bulkActions:M(),pageParam:"page",MoreButtons:a.jsx(a.Fragment,{children:a.jsxs("div",{className:"flex gap-3 justify-center",children:[m==="gmail"&&a.jsx(o,{onClick:k,icon:"fa-envelope",variant:"delete",size:"sm",children:r("fetch_emails")}),m==="outlook"&&a.jsx(o,{onClick:j,icon:"fa-envelope-open",variant:"info",size:"sm",children:r("fetch_emails")})]})})})]})}export{E as default};
