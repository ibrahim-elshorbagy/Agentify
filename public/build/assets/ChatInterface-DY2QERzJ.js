import{r as l,u as b,j as e}from"./app-Cuv1G9Gb.js";import{u as j}from"./useTrans-BkTq1qdy.js";import{M as k,A as v}from"./index-lCKpLNk3.js";import{P as w}from"./PrimaryButton-Kr517Z_H.js";import{A as N}from"./ActionButton-C3RuSAnR.js";function R({currentConversation:s,messages:n=[],files:y=[],onEditConversation:h,hasFiles:a=!1,onToggleSidebar:o,isSidebarOpen:_=!1}){const{t:r}=j(),x=l.useRef(null),c=l.useRef(null),{data:d,setData:u,post:p,processing:i,reset:f}=b({conversation_id:s?.id||null,message:""});l.useEffect(()=>{x.current?.scrollIntoView({behavior:"smooth"})},[n]),l.useEffect(()=>{u("conversation_id",s?.id||null)},[s]);const m=t=>{t.preventDefault(),!(!d.message.trim()||!s||!a)&&p(route("user.report-agent.messages.send"),{preserveScroll:!0,onSuccess:()=>{f("message"),c.current?.focus()}})},g=t=>{t.key==="Enter"&&!t.shiftKey&&(t.preventDefault(),m(t))};return s?e.jsxs("div",{className:"flex-1 flex flex-col min-h-screen h-full overflow-hidden",children:[e.jsx("div",{className:"flex-shrink-0 p-4 bg-white dark:bg-neutral-900 border-b border-neutral-200 dark:border-neutral-700",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:o,className:"xl:hidden p-2 text-green-600 bg-green-50 dark:bg-green-200 hover:text-green-700 hover:bg-green-100 dark:hover:bg-green-800 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.955 8.955 0 01-3.774-.9L3 21l1.9-6.226A8.955 8.955 0 013 12a8 8 0 018-8c4.418 0 8 3.582 8 8z"})})}),e.jsx("div",{children:e.jsx("h1",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-100",children:s.name})})]}),e.jsx(N,{onClick:()=>h(s),icon:"fa-edit",variant:"info",children:r("edit")})]})}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0",children:[n.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-robot text-green-500"})}),e.jsx("h3",{className:"text-lg font-medium text-neutral-900 dark:text-neutral-100 mb-2",children:r("start_conversation")}),e.jsx("p",{className:"text-neutral-600 dark:text-neutral-400",children:r("start_conversation_description")})]}):n.map(t=>e.jsx("div",{className:`flex ${t.sender_type==="user"?"justify-end":"justify-start"}`,children:e.jsx("div",{className:`max-w-sm lg:max-w-2xl px-4 py-2 rounded-lg min-w-0 ${t.sender_type==="user"?"bg-green-500 text-white":"bg-white dark:bg-neutral-800 text-neutral-900 dark:text-neutral-100 border border-neutral-200 dark:border-neutral-700"}`,children:e.jsxs("div",{className:"flex items-start gap-2 min-w-0",children:[t.sender_type==="ai"&&e.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-robot text-xs text-green-500"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:`prose prose-sm max-w-none break-words leading-relaxed ${t.sender_type==="user"?"text-white prose-headings:text-white prose-p:text-white prose-strong:text-white prose-code:text-green-100 prose-a:text-green-200 prose-ul:text-white prose-ol:text-white prose-li:text-white":"text-neutral-900 dark:text-neutral-100 prose-headings:text-neutral-900 dark:prose-headings:text-neutral-100 prose-p:text-neutral-900 dark:prose-p:text-neutral-100 prose-strong:text-neutral-900 dark:prose-strong:text-neutral-100 prose-code:text-neutral-700 dark:prose-code:text-neutral-300 prose-a:text-green-600 dark:prose-a:text-green-400 prose-ul:text-neutral-900 dark:prose-ul:text-neutral-100 prose-ol:text-neutral-900 dark:prose-ol:text-neutral-100 prose-li:text-neutral-900 dark:prose-li:text-neutral-100"}`,dir:"auto",children:e.jsx("div",{className:"no-tailwindcss-support-display px-4",children:e.jsx(k,{children:t.message.replace(/\\n/g,`
`)})})}),e.jsx("p",{className:`text-xs mt-1 ${t.sender_type==="user"?"text-green-100":"text-neutral-500 dark:text-neutral-400"}`,children:new Date(t.created_at).toLocaleTimeString()})]})]})})},t.id)),e.jsx("div",{ref:x})]}),e.jsxs("div",{className:"flex-shrink-0 p-4 bg-white dark:bg-neutral-900 border-t border-neutral-200 dark:border-neutral-700",children:[!a&&e.jsx("div",{className:"mb-3 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2 text-yellow-800 dark:text-yellow-200",children:[e.jsx("i",{className:"fa-solid fa-exclamation-triangle text-sm"}),e.jsx("span",{className:"text-sm font-medium",children:r("upload_files_to_enable_messaging")})]})}),e.jsxs("form",{onSubmit:m,className:"flex gap-2",children:[e.jsx("div",{className:"flex-1",children:e.jsx(v,{ref:c,value:d.message,onChange:t=>u("message",t.target.value),onKeyDown:g,placeholder:r(a?"type_message_placeholder":"upload_files_to_chat"),disabled:i||!a})}),e.jsx(w,{type:"submit",icon:"fa-paper-plane",disabled:i||!d.message.trim()||!a,className:"px-4 py-2 self-end mb-2",children:r(i?"sending":"send")})]})]})]}):e.jsxs("div",{className:"flex-1 flex flex-col min-h-screen overflow-hidden",children:[e.jsx("div",{className:"flex-shrink-0 p-4 bg-white dark:bg-neutral-900 border-b border-neutral-200 dark:border-neutral-700",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:o,className:"xl:hidden p-2 text-green-600 bg-green-50 dark:bg-green-200 hover:text-green-700 hover:bg-green-100 dark:hover:bg-green-800 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-3.582 8-8 8a8.955 8.955 0 01-3.774-.9L3 21l1.9-6.226A8.955 8.955 0 013 12a8 8 0 018-8c4.418 0 8 3.582 8 8z"})})}),e.jsx("h1",{className:"text-lg font-semibold text-neutral-900 dark:text-neutral-100",children:r("report_agent")})]})})}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-4 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center",children:e.jsx("i",{className:"fa-solid fa-comments text-2xl text-green-500"})}),e.jsx("h3",{className:"text-xl font-semibold text-neutral-900 dark:text-neutral-100 mb-2",children:r("select_conversation")}),e.jsx("p",{className:"text-neutral-600 dark:text-neutral-400",children:r("select_conversation_description")})]})})]})}export{R as default};
