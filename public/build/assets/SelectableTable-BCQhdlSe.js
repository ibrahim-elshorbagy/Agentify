import{j as e,L as K,r as g,a as M}from"./app--jV6bvDR.js";import{u as H}from"./useTrans-BkTq1qdy.js";function O({variant:u="primary",className:a="",disabled:d,children:i,icon:h,size:p="xs",as:n="button",href:k,...f}){const y={primary:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800",edit:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800",delete:"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300 hover:bg-red-200 dark:hover:bg-red-800",status:"bg-yellow-100 text-yellow-700 dark:bg-yellow-900 dark:text-yellow-300 hover:bg-yellow-200 dark:hover:bg-yellow-800",success:"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300 hover:bg-green-200 dark:hover:bg-green-800",info:"bg-blue-100 text-blue-700 dark:bg-blue-900 dark:text-blue-300 hover:bg-blue-200 dark:hover:bg-blue-800"},j={xs:"px-2 py-1 text-xs",sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm"},S=h?e.jsx("i",{className:`fa-solid ${h}`}):null,x=`flex items-center gap-1 ${j[p]} font-medium rounded-lg transition-all ${y[u]} ${d&&"opacity-70"} ${a}`;return n==="a"?e.jsxs(K,{href:k,className:x,...f,children:[S,i]}):e.jsxs("button",{className:x,disabled:d,...f,children:[S,i]})}function V({links:u}){return e.jsx("nav",{className:"mt-6 mb-4 flex justify-center items-center gap-1",children:u?.map((a,d)=>e.jsx(K,{preserveScroll:!0,href:a.url||"#",dangerouslySetInnerHTML:{__html:a.label},className:`inline-flex justify-center items-center h-8 min-w-8 px-3 rounded-lg text-sm transition-colors
                        ${a.active?"bg-green-500 text-white font-medium":""}
                        ${a.url?"text-neutral-700 dark:text-neutral-300 hover:bg-green-100 dark:hover:bg-green-900/30 hover:text-green-700 dark:hover:text-green-300":"text-neutral-400 dark:text-neutral-600 cursor-not-allowed"}
                    `},d))})}function W({onSort:u,sortField:a,sortDirection:d,perPage:i=15,totalItems:h=0,onPerPageChange:p,selectedItems:n=[],onSelectAll:k,bulkActions:f=[],onBulkAction:y,sortOptions:j=[],queryParams:S={},routeName:x,showSelection:T=!0,pageParam:z="page"}){const{t:l}=H(),[N,v]=g.useState(!1),[L,b]=g.useState(!1),[m,P]=g.useState(!1),C=[10,25,50,100],$=r=>{let c="asc";if(r===a&&d==="asc"&&(c="desc"),u)u(r,c);else if(x){let w={...Object.fromEntries(new URLSearchParams(window.location.search))};w.sort=r,w.direction=c,w[z]=1,M.get(route(x,route().params),w,{preserveState:!0,replace:!0})}b(!1)},B=r=>{if(p)p(r);else if(x){let c={...Object.fromEntries(new URLSearchParams(window.location.search))};c.per_page=r,c[z]=1,M.get(route(x,route().params),c,{preserveState:!0,replace:!0})}v(!1)},E=r=>{if(n.length!==0){if(r.requiresConfirmation){const c=r.confirmMessageKey?l(r.confirmMessageKey,{count:n.length}):r.confirmMessage||l("confirm_action",{count:n.length});if(!confirm(c))return}y(r,n),P(!1)}};g.useEffect(()=>{const r=()=>{v(!1),b(!1),P(!1)};return document.addEventListener("click",r),()=>{document.removeEventListener("click",r)}},[]);const _=r=>{r.stopPropagation()};return e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-4 text-sm",children:[e.jsx("div",{className:"flex items-center gap-2",children:T&&n.length>0?e.jsx("div",{className:"flex items-center gap-2",children:f.length>0&&e.jsxs("div",{className:"relative",onClick:_,children:[e.jsxs(O,{variant:"primary",icon:"fa-list-check",size:"sm",onClick:r=>{r.stopPropagation(),P(!m)},children:[l("bulk_actions")," (",n.length,")"]}),m&&e.jsx("div",{className:"absolute ltr:left-0 z-10 mt-1 w-48 rounded-lg shadow-lg bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700",children:e.jsx("div",{className:"py-1",children:f.map((r,c)=>e.jsxs("button",{className:`flex items-center w-full px-4 py-2 gap-2 ltr:text-left rtl:text-right text-sm hover:bg-neutral-100 dark:hover:bg-neutral-700 ${r.variant==="delete"?"text-red-600 dark:text-red-400":r.variant==="green"?"text-green-600 dark:text-green-400":r.variant==="blue"?"text-blue-600 dark:text-blue-400":r.variant==="yellow"?"text-yellow-600 dark:text-yellow-400":"text-neutral-700 dark:text-neutral-200"}`,onClick:()=>E(r),children:[r.icon&&e.jsx("i",{className:` ${r.icon}`}),r.label]},c))})})]})}):e.jsxs("div",{className:"text-neutral-500 dark:text-neutral-400",children:[h," ",l(h!==1?"items":"item")]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[j.length>0&&e.jsxs("div",{className:"relative",onClick:_,children:[e.jsxs(O,{variant:"primary",icon:"fa-sort",size:"sm",onClick:r=>{r.stopPropagation(),b(!L)},children:[l("sort"),a&&e.jsxs("span",{className:"hidden sm:inline ml-1",children:[l("by")," ",l(a)," ",d==="asc"?`↑ ${l("ascending")}`:`↓ ${l("descending")}`]})]}),L&&e.jsx("div",{className:"absolute right-0 z-10 mt-1 w-48 rounded-lg shadow-lg bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700",children:e.jsx("div",{className:"py-1",children:j.map(r=>e.jsxs("button",{className:`flex items-center w-full px-4 py-2 gap-2 text-left text-sm hover:bg-neutral-100 dark:hover:bg-neutral-700 ${a===r.field?"text-green-600 dark:text-green-400":"text-neutral-700 dark:text-neutral-200"}`,onClick:()=>$(r.field),children:[r.label,a===r.field&&e.jsx("i",{className:` fa-solid ${d==="asc"?"fa-arrow-up":"fa-arrow-down"}`})]},r.field))})})]}),e.jsxs("div",{className:"relative",onClick:_,children:[e.jsxs(O,{variant:"primary",icon:"fa-list-ol",size:"sm",className:"bg-neutral-200 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-300 hover:bg-neutral-300 dark:hover:bg-neutral-600",onClick:r=>{r.stopPropagation(),v(!N)},children:[e.jsx("span",{children:i})," ",l("per_page")]}),N&&e.jsx("div",{className:"absolute right-0 z-10 mt-1 w-36 rounded-lg shadow-lg bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700",children:e.jsx("div",{className:"py-1",children:C.map(r=>e.jsx("button",{className:`flex w-full px-4 py-2 text-left text-sm hover:bg-neutral-100 dark:hover:bg-neutral-700 ${i===r?"text-green-600 dark:text-green-400":"text-neutral-700 dark:text-neutral-200"}`,onClick:()=>B(r),children:r},r))})})]})]})]})}function Z({columns:u,data:a,onRowClick:d=null,routeName:i,queryParams:h={},renderRow:p=null,idField:n="id",pagination:k=null,onSort:f=null,bulkActions:y=[],sortOptions:j=[],defaultSortField:S=null,defaultSortDirection:x="asc",perPageOptions:T=[10,25,50,100],defaultPerPage:z=15,getRowClassName:l=null,showSelection:N=!0,pageParam:v="page"}){const{t:L}=H(),[b,m]=g.useState([]),[P,C]=g.useState(!1),[$,B]=g.useState(S||""),[E,_]=g.useState(x),[r,c]=g.useState(h.per_page||15);g.useEffect(()=>{m([]),C(!1)},[a]);const w=t=>{m(s=>{const o=t[n];return s.includes(o)?s.filter(q=>q!==o):[...s,o]})},U=()=>{P||b.length===a.length?(m([]),C(!1)):(m(a.map(t=>t[n])),C(!0))},R=(t,s)=>{if(B(t),_(s),f)f(t,s);else if(i){let o={...Object.fromEntries(new URLSearchParams(window.location.search))};o.sort=t,o.direction=s,o[v]=1,M.get(route(i,route().params),o,{preserveState:!0,replace:!0})}},D=t=>{if(c(t),i){let s={...Object.fromEntries(new URLSearchParams(window.location.search))};s.per_page=t,s[v]=1,M.get(route(i,route().params),s,{preserveState:!0,replace:!0})}},G=async(t,s)=>{t.handler&&(await t.handler(s),m([]))};return e.jsxs(e.Fragment,{children:[e.jsx(W,{onSort:R,sortField:$,sortDirection:E,perPage:r,totalItems:k?k.total:a.length,onPerPageChange:D,selectedItems:b,onSelectAll:U,bulkActions:y,onBulkAction:G,sortOptions:j,queryParams:h,routeName:i,pageParam:v}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("table",{className:"w-full text-sm rtl:text-right ltr:text-left text-neutral-800 dark:text-neutral-200",children:[e.jsx("thead",{className:"text-neutral-700 uppercase border-b-2 border-neutral-500 bg-neutral-100 dark:bg-neutral-800 dark:text-neutral-300",children:e.jsxs("tr",{children:[N&&e.jsx("th",{className:"py-2 px-3 w-10",children:e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-green-600 bg-neutral-100 border-neutral-300 rounded focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-neutral-800 dark:focus:ring-offset-neutral-800 focus:ring-2 dark:bg-neutral-700 dark:border-neutral-600",checked:a.length>0&&b.length===a.length,onChange:U})})}),u.map(t=>e.jsx("th",{className:`py-2 px-3 font-semibold text-nowrap ${t.className||""}`,children:e.jsxs("div",{className:"flex items-center gap-1",children:[t.icon&&e.jsx("i",{className:`fa-solid ${t.icon}`}),e.jsx("span",{children:t.label}),j.find(s=>s.field===t.field)&&e.jsx("button",{className:"ml-1",onClick:()=>R(t.field,$===t.field&&E==="asc"?"desc":"asc"),children:$===t.field?e.jsx("i",{className:`fa-solid fa-sort-${E==="asc"?"up":"down"} text-green-500`}):e.jsx("i",{className:"fa-solid fa-sort text-neutral-400"})})]})},t.field))]})}),e.jsx("tbody",{children:a.length>0?a.map((t,s)=>{const o=b.includes(t[n]),q=l?l(t,s,o):"",J=s%2===0?"bg-neutral-100 dark:bg-neutral-800":"bg-neutral-50 dark:bg-neutral-900";return e.jsxs("tr",{className:`transition-colors ${q||J} border-b border-neutral-300 dark:border-neutral-800 ${o?"bg-green-50 dark:bg-green-950":""} ${d?"cursor-pointer":""}`,onClick:d?()=>d(t):void 0,children:[N&&e.jsx("td",{className:"px-3 py-2",onClick:A=>{A.stopPropagation(),w(t)},children:e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-green-600 bg-neutral-100 border-neutral-300 rounded focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-neutral-800 dark:focus:ring-offset-neutral-800 focus:ring-2 dark:bg-neutral-700 dark:border-neutral-600",checked:o,onChange:()=>{}})})}),p?p(t,o,w):u.map((A,Q)=>e.jsx("td",{className:"px-3 py-2",children:A.render?A.render(t):t[A.accessor]||"-"},Q))]},t[n])}):e.jsx("tr",{children:e.jsxs("td",{colSpan:u.length+1,className:"px-3 py-2 text-center text-neutral-500 dark:text-neutral-400",children:[e.jsx("i",{className:"fa-regular fa-face-frown"})," ",L("no_items_found")]})})})]})}),k&&e.jsx(V,{links:k.links})]})}export{O as A,Z as S};
