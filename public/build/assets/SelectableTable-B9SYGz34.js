import{j as e,L as Z,r as d,a as M}from"./app-nxeMV1Hc.js";import{A as T}from"./ActionButton-Dh2vTSQ6.js";import{u as G}from"./useTrans-BkTq1qdy.js";function F({links:u}){return e.jsx("nav",{className:"mt-6 mb-4 flex justify-center items-center gap-1",children:u?.map((s,o)=>e.jsx(Z,{preserveScroll:!0,href:s.url||"#",dangerouslySetInnerHTML:{__html:s.label},className:`inline-flex justify-center items-center h-8 min-w-8 px-3 rounded-lg text-sm transition-colors
                        ${s.active?"bg-green-500 text-white font-medium":""}
                        ${s.url?"text-neutral-700 dark:text-neutral-300 hover:bg-green-100 dark:hover:bg-green-900/30 hover:text-green-700 dark:hover:text-green-300":"text-neutral-400 dark:text-neutral-600 cursor-not-allowed"}
                    `},o))})}function ee({onSort:u,sortField:s,sortDirection:o,perPage:g=15,totalItems:j=0,onPerPageChange:v,selectedItems:i=[],onSelectAll:w,bulkActions:N=[],onBulkAction:A,sortOptions:S=[],queryParams:U={},routeName:p,showSelection:R=!0,pageParam:z="page",MoreButtons:$=null,selectAllConfig:f=null}){const{t:n}=G(),[_,x]=d.useState(!1),[E,y]=d.useState(!1),[L,P]=d.useState(!1),B=[10,25,50,100],k=r=>{let l="asc";if(r===s&&o==="asc"&&(l="desc"),u)u(r,l);else if(p){let h={...Object.fromEntries(new URLSearchParams(window.location.search))};h.sort=r,h.direction=l,h[z]=1,M.get(route(p,route().params),h,{preserveState:!0,replace:!0})}y(!1)},m=r=>{if(v)v(r);else if(p){let l={...Object.fromEntries(new URLSearchParams(window.location.search))};l.per_page=r,l[z]=1,M.get(route(p,route().params),l,{preserveState:!0,replace:!0})}x(!1)},q=r=>{if(i.length!==0){if(r.requiresConfirmation){const l=r.confirmMessageKey?n(r.confirmMessageKey,{count:i.length}):r.confirmMessage||n("confirm_action",{count:i.length});if(!confirm(l))return}A(r,i),P(!1)}};d.useEffect(()=>{const r=()=>{x(!1),y(!1),P(!1)};return document.addEventListener("click",r),()=>{document.removeEventListener("click",r)}},[]);const b=r=>{r.stopPropagation()};return e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-2 mb-4 text-sm",children:[e.jsx("div",{className:"flex items-center gap-2",children:R&&i.length>0?e.jsxs("div",{className:"flex items-center gap-2",children:[N.length>0&&e.jsxs("div",{className:"relative",onClick:b,children:[e.jsxs(T,{variant:"primary",icon:"fa-list-check",size:"sm",onClick:r=>{r.stopPropagation(),P(!L)},children:[n("bulk_actions")," (",i.length,")"]}),L&&e.jsx("div",{className:"absolute ltr:left-0 z-10 mt-1 w-48 rounded-lg shadow-lg bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700",children:e.jsx("div",{className:"py-1",children:N.map((r,l)=>e.jsxs("button",{className:`flex items-center w-full px-4 py-2 gap-2 ltr:text-left rtl:text-right text-sm hover:bg-neutral-100 dark:hover:bg-neutral-700 ${r.variant==="delete"?"text-red-600 dark:text-red-400":r.variant==="green"?"text-green-600 dark:text-green-400":r.variant==="blue"?"text-blue-600 dark:text-blue-400":r.variant==="yellow"?"text-yellow-600 dark:text-yellow-400":"text-neutral-700 dark:text-neutral-200"}`,onClick:()=>q(r),children:[r.icon&&e.jsx("i",{className:` ${r.icon}`}),r.label]},l))})})]}),f&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"selectAll",checked:f.checked,onChange:f.onChange,className:"w-4 h-4 text-green-600 bg-neutral-100 border-neutral-300 rounded focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-neutral-800 focus:ring-2 dark:bg-neutral-700 dark:border-neutral-600"}),e.jsx("label",{htmlFor:"selectAll",className:"text-sm font-medium text-neutral-900 dark:text-neutral-100 cursor-pointer",children:f.label})]})]}):e.jsxs("div",{className:"text-neutral-500 dark:text-neutral-400",children:[j," ",n(j!==1?"items":"item")]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[$,S.length>0&&e.jsxs("div",{className:"relative",onClick:b,children:[e.jsxs(T,{variant:"primary",icon:"fa-sort",size:"sm",onClick:r=>{r.stopPropagation(),y(!E)},children:[n("sort"),s&&e.jsxs("span",{className:"hidden sm:inline ml-1",children:[n("by")," ",n(s)," ",o==="asc"?`↑ ${n("ascending")}`:`↓ ${n("descending")}`]})]}),E&&e.jsx("div",{className:"absolute right-0 z-10 mt-1 w-48 rounded-lg shadow-lg bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700",children:e.jsx("div",{className:"py-1",children:S.map(r=>e.jsxs("button",{className:`flex items-center w-full px-4 py-2 gap-2 text-left text-sm hover:bg-neutral-100 dark:hover:bg-neutral-700 ${s===r.field?"text-green-600 dark:text-green-400":"text-neutral-700 dark:text-neutral-200"}`,onClick:()=>k(r.field),children:[r.label,s===r.field&&e.jsx("i",{className:` fa-solid ${o==="asc"?"fa-arrow-up":"fa-arrow-down"}`})]},r.field))})})]}),e.jsxs("div",{className:"relative",onClick:b,children:[e.jsxs(T,{variant:"primary",icon:"fa-list-ol",size:"sm",className:"bg-neutral-200 text-neutral-700 dark:bg-neutral-700 dark:text-neutral-300 hover:bg-neutral-300 dark:hover:bg-neutral-600",onClick:r=>{r.stopPropagation(),x(!_)},children:[e.jsx("span",{children:g})," ",n("per_page")]}),_&&e.jsx("div",{className:"absolute right-0 z-10 mt-1 w-36 rounded-lg shadow-lg bg-white dark:bg-neutral-800 border border-neutral-300 dark:border-neutral-700",children:e.jsx("div",{className:"py-1",children:B.map(r=>e.jsx("button",{className:`flex w-full px-4 py-2 text-left text-sm hover:bg-neutral-100 dark:hover:bg-neutral-700 ${g===r?"text-green-600 dark:text-green-400":"text-neutral-700 dark:text-neutral-200"}`,onClick:()=>m(r),children:r},r))})})]})]})]})}function ae({columns:u,data:s,onRowClick:o=null,routeName:g,queryParams:j={},renderRow:v=null,idField:i="id",pagination:w=null,onSort:N=null,bulkActions:A=[],sortOptions:S=[],defaultSortField:U=null,defaultSortDirection:p="asc",perPageOptions:R=[10,25,50,100],defaultPerPage:z=15,getRowClassName:$=null,showSelection:f=!0,pageParam:n="page",MoreButtons:_=null,selectedItems:x,onSelectionChange:E,selectAllConfig:y=null}){const{t:L}=G(),[P,B]=d.useState([]),k=x!==void 0?x:P,m=E||B,[q,b]=d.useState(!1),[r,l]=d.useState(U||""),[h,I]=d.useState(p),[J,Q]=d.useState(j.per_page||15);d.useEffect(()=>{x===void 0&&(m([]),b(!1))},[s,x]);const K=t=>{m(a=>{const c=t[i];return a.includes(c)?a.filter(O=>O!==c):[...a,c]})},H=()=>{q||k.length===s.length?(m([]),b(!1)):(m(s.map(t=>t[i])),b(!0))},D=(t,a)=>{if(l(t),I(a),N)N(t,a);else if(g){let c={...Object.fromEntries(new URLSearchParams(window.location.search))};c.sort=t,c.direction=a,c[n]=1,M.get(route(g,route().params),c,{preserveState:!0,replace:!0})}},V=t=>{if(Q(t),g){let a={...Object.fromEntries(new URLSearchParams(window.location.search))};a.per_page=t,a[n]=1,M.get(route(g,route().params),a,{preserveState:!0,replace:!0})}},W=async(t,a)=>{t.handler&&(await t.handler(a),m([]))};return e.jsxs(e.Fragment,{children:[e.jsx(ee,{onSort:D,sortField:r,sortDirection:h,perPage:J,totalItems:w?w.total:s.length,onPerPageChange:V,selectedItems:k,onSelectAll:H,bulkActions:A,onBulkAction:W,sortOptions:S,queryParams:j,routeName:g,pageParam:n,MoreButtons:_,selectAllConfig:y}),e.jsx("div",{className:"overflow-auto",children:e.jsxs("table",{className:"w-full text-sm rtl:text-right ltr:text-left text-neutral-800 dark:text-neutral-200",children:[e.jsx("thead",{className:"text-neutral-700 uppercase border-b-2 border-green-300 dark:border-green-600 bg-green-100/80 dark:bg-green-900/50 dark:text-neutral-300",children:e.jsxs("tr",{children:[f&&e.jsx("th",{className:"py-2 px-3 w-10",children:e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-green-600 bg-green-50 border-green-300 rounded focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-neutral-800 dark:focus:ring-offset-neutral-800 focus:ring-2 dark:bg-green-900/50 dark:border-green-600",checked:s.length>0&&k.length===s.length,onChange:H})})}),u.map(t=>e.jsx("th",{className:`py-2 px-3 font-semibold text-nowrap ${t.className||""}`,children:e.jsxs("div",{className:"flex items-center gap-1",children:[t.icon&&e.jsx("i",{className:`fa-solid ${t.icon}`}),e.jsx("span",{children:t.label}),S.find(a=>a.field===t.field)&&e.jsx("button",{className:"ml-1",onClick:()=>D(t.field,r===t.field&&h==="asc"?"desc":"asc"),children:r===t.field?e.jsx("i",{className:`fa-solid fa-sort-${h==="asc"?"up":"down"} text-green-500`}):e.jsx("i",{className:"fa-solid fa-sort text-neutral-400"})})]})},t.field))]})}),e.jsx("tbody",{children:s.length>0?s.map((t,a)=>{const c=k.includes(t[i]),O=$?$(t,a,c):"",X=a%2===0?"bg-green-50/80 dark:bg-green-900/20":"bg-green-100/60 dark:bg-green-800/30";return e.jsxs("tr",{className:`transition-colors ${O||X} border-b border-green-200/50 dark:border-green-700/50 ${c?"bg-green-100/90 dark:bg-green-800/30":""} ${o?"cursor-pointer":""}`,onClick:o?()=>o(t):void 0,children:[f&&e.jsx("td",{className:"px-3 py-2",onClick:C=>{C.stopPropagation(),K(t)},children:e.jsx("div",{className:"flex items-center",children:e.jsx("input",{type:"checkbox",className:"w-4 h-4 text-green-600 bg-green-50 border-green-300 rounded focus:ring-green-500 dark:focus:ring-green-600 dark:ring-offset-neutral-800 dark:focus:ring-offset-neutral-800 focus:ring-2 dark:bg-green-900/50 dark:border-green-600",checked:c,onChange:()=>{}})})}),v?v(t,c,K):u.map((C,Y)=>e.jsx("td",{className:"px-3 py-2",children:C.render?C.render(t):t[C.accessor]||"-"},Y))]},t[i])}):e.jsx("tr",{children:e.jsxs("td",{colSpan:u.length+1,className:"px-3 py-2 text-center text-neutral-500 dark:text-neutral-400",children:[e.jsx("i",{className:"fa-regular fa-face-frown"})," ",L("no_items_found")]})})})]})}),w&&e.jsx(F,{links:w.links})]})}export{ae as S};
