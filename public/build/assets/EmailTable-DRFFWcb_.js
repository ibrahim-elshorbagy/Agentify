import{j as e}from"./app-C9gFg2kD.js";import{u as C}from"./useTrans-BkTq1qdy.js";import{S as z}from"./SelectableTable-BIBQNt4e.js";import{S as y}from"./SearchBar-i2jfIm0i.js";import{A as s}from"./ActionButton-DRfEXHuy.js";import{getFolderTitle as S,getFolderIconClass as A,getFolderColorClasses as F}from"./EmailTablePartials-B39Tznyu.js";import{getBulkActions as B,handleGetGmail as T,handleGetOutlook as $,toggleStar as P,toggleRead as R,toggleArchive as G,moveToSpam as m,moveToBin as d,restore as p,deletePermanently as D}from"./EmailTableActions-CyPdt360.js";function J({emails:x,queryParams:f,type:r,source:l,selectedItems:o=[],onSelectionChange:c=null,allIds:i=[],onMoveEmails:u=null,setIsScheduleModalOpen:g,setCurrentSource:b,scheduleSettings:E={}}){const{t:a}=C(),j=t=>{u&&u(t)},v=[{field:"row_number",label:a("serial"),icon:"fa-hashtag"},{field:"from",label:a("from"),icon:"fa-user"},{field:"subject",label:a("subject"),icon:"fa-envelope"},{field:"received_at",label:a("received_at"),icon:"fa-calendar"},{field:"actions",label:a("actions"),icon:"fa-gear",className:"flex justify-center"}],_=[{field:"id",label:a("id")},{field:"from_email",label:a("from")},{field:"subject",label:a("subject")},{field:"received_at",label:a("received_at")},{field:"is_starred",label:a("starred")},{field:"is_read",label:a("read")}],k=t=>{const h=()=>{const n=[e.jsx(s,{href:route("user.email-agent.view",t.id),variant:"info",icon:"fa-eye",size:"xs",as:"a",children:a("view")},"view")];return r==="inbox"?n.push(e.jsx(s,{onClick:()=>m(t.id),variant:"warning",icon:"fa-exclamation-circle",size:"xs",as:"button",children:a("spam")},"spam"),e.jsx(s,{onClick:()=>d(t.id),variant:"delete",icon:"fa-trash-can",size:"xs",as:"button",children:a("bin")},"bin")):r==="spam"?n.push(e.jsx(s,{onClick:()=>p(t.id),variant:"success",icon:"fa-undo",size:"xs",as:"button",children:a("restore")},"restore"),e.jsx(s,{onClick:()=>d(t.id),variant:"delete",icon:"fa-trash-can",size:"xs",as:"button",children:a("bin")},"bin")):r==="bin"?n.push(e.jsx(s,{onClick:()=>p(t.id),variant:"success",icon:"fa-undo",size:"xs",as:"button",children:a("restore")},"restore"),e.jsx(s,{onClick:()=>m(t.id),variant:"warning",icon:"fa-exclamation-circle",size:"xs",as:"button",children:a("spam")},"spam"),e.jsx(s,{onClick:()=>D(t.id),variant:"delete",icon:"fa-trash-can",size:"xs",as:"button",children:a("delete_permanently")},"delete")):n.push(e.jsx(s,{onClick:()=>d(t.id),variant:"delete",icon:"fa-trash-can",size:"xs",as:"button",children:a("bin")},"bin")),n};return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-neutral-900 dark:text-neutral-100",children:t.row_number}),e.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-user text-blue-500"}),e.jsx("span",{className:`text-sm font-medium text-neutral-900 dark:text-neutral-100 ${t.is_read?"font-normal":"font-bold"}`,children:t.from_name||t.from_email})]}),t.from_name&&e.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 mx-6",children:t.from_email})]})}),e.jsx("td",{className:"px-3 py-4 whitespace-nowrap w-32 max-w-xs",children:e.jsxs("div",{className:"flex items-center gap-2",children:[r==="inbox"&&t.folder!=="inbox"&&e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium shrink-0 ${F(t.folder)}`,children:a(t.folder)}),e.jsx("span",{className:`text-sm text-neutral-900 dark:text-neutral-100 truncate ${t.is_read?"font-normal":"font-bold"}`,title:t.subject,children:t.subject})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-neutral-500 dark:text-neutral-400",children:t.received_at||t.created_at?new Date(t.received_at||t.created_at).toLocaleString():""}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>P(t.id,t.is_starred),className:"hover:scale-110 transition-transform duration-200",children:t.is_starred?e.jsx("i",{className:"fa-solid fa-star text-yellow-500 text-lg hover:text-yellow-600"}):e.jsx("i",{className:"fa-regular fa-star text-gray-400 text-lg hover:text-yellow-500"})}),e.jsx("button",{onClick:()=>R(t.id,t.is_read),className:"hover:scale-110 transition-transform duration-200",title:t.is_read?a("mark_as_unread"):a("mark_as_read"),children:t.is_read?e.jsx("i",{className:"fa-solid fa-envelope-open text-blue-500 text-lg hover:text-blue-600"}):e.jsx("i",{className:"fa-solid fa-envelope text-green-500 text-lg hover:text-green-600"})}),(!["archive","starred","spam","bin"].includes(r)||r==="archive")&&e.jsx("button",{onClick:()=>G(t.id,t.is_archived),className:"hover:scale-110 transition-transform duration-200",title:t.is_archived?a("unarchive"):a("archive"),children:t.is_archived?e.jsx("i",{className:"fa-solid fa-undo text-purple-500 text-lg hover:text-purple-600"}):e.jsx("i",{className:"fa-solid fa-archive text-purple-500 text-lg hover:text-purple-600"})}),h()]})})]})},N=(t,h,n)=>n?"":t.is_read?"bg-green-100/60 dark:bg-green-800/30":"bg-green-50/80 dark:bg-green-500/10",w=i.length>0?{checked:o.length===i.length&&i.every(t=>o.includes(t)),onChange:t=>{t.target.checked?c(i):c([])},label:`${a("select_all")} (${i.length})`}:null;return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("h2",{className:"text-2xl font-bold leading-tight text-neutral-900 dark:text-neutral-100 flex items-center gap-2",children:[e.jsx("i",{className:`fa-solid ${A(r)}`}),S(r,a)]})}),e.jsx("div",{className:"mb-4",children:e.jsx(y,{placeholder:a("search"),defaultValue:f.search||"",queryKey:"search",routeName:"user.email-agent.emails",routeParams:{folder:r},icon:"fa-magnifying-glass",pageParam:"page"})}),e.jsx(z,{columns:v,data:x.data,renderRow:k,pagination:x,routeName:"user.email-agent.emails",queryParams:{...f,folder:r},sortOptions:_,defaultSortField:"received_at",defaultSortDirection:"desc",getRowClassName:N,bulkActions:B(r,a,j),selectedItems:o,onSelectionChange:c,selectAllConfig:w,pageParam:"page",MoreButtons:e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex gap-3 justify-center",children:[l==="gmail"&&e.jsx(s,{onClick:T,icon:"fa-envelope",variant:"delete",size:"sm",children:a("fetch_emails")}),l==="outlook"&&e.jsx(s,{onClick:$,icon:"fa-envelope-open",variant:"info",size:"sm",children:a("fetch_emails")}),e.jsx(s,{onClick:()=>{b(l),g(!0)},icon:"fa-clock",variant:"purple",size:"sm",children:a("schedule_settings")})]})})})]})}export{J as default};
