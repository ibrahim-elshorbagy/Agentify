import{r as f,j as e}from"./app-LbRyptoH.js";import{u as k}from"./useTrans-BkTq1qdy.js";import{S as w}from"./SelectableTable-C3z_8aCT.js";import{S as C}from"./SearchBar-DxrbTW-E.js";import{A as r}from"./ActionButton-BHWmtU1p.js";import z from"./MoveEmailsModal-Ieuj1qWH.js";import{getFolderTitle as S,getFolderIconClass as F,getFolderColorClasses as M}from"./EmailTablePartials-B39Tznyu.js";import{getBulkActions as y,handleGetGmail as E,handleGetOutlook as A,toggleStar as B,toggleRead as T,toggleArchive as O,moveToSpam as m,moveToBin as i,restore as u,deletePermanently as P}from"./EmailTableActions-n_8wShp1.js";import"./AppModal-D19Q887M.js";import"./SelectInput-CIh5prDd.js";import"./InputLabel-BHmeGexy.js";import"./PrimaryButton-DSTkY3wJ.js";import"./SecondaryButton-AvrnFVg8.js";function W({emails:l,queryParams:o,type:s,source:c}){const{t}=k(),[h,d]=f.useState(!1),[p,g]=f.useState([]),b=a=>{g(a),d(!0)},v=[{field:"row_number",label:t("serial"),icon:"fa-hashtag"},{field:"from",label:t("from"),icon:"fa-user"},{field:"subject",label:t("subject"),icon:"fa-envelope"},{field:"received_at",label:t("received_at"),icon:"fa-calendar"},{field:"actions",label:t("actions"),icon:"fa-gear",className:"flex justify-center"}],j=[{field:"id",label:t("id")},{field:"from_email",label:t("from")},{field:"subject",label:t("subject")},{field:"received_at",label:t("received_at")},{field:"created_at",label:t("created_at")},{field:"is_starred",label:t("starred")},{field:"is_read",label:t("read")}],_=a=>{const x=()=>{const n=[e.jsx(r,{href:route("user.email-agent.view",a.id),variant:"info",icon:"fa-eye",size:"xs",as:"a",children:t("view")},"view")];return s==="inbox"?n.push(e.jsx(r,{onClick:()=>m(a.id),variant:"warning",icon:"fa-exclamation-circle",size:"xs",as:"button",children:t("spam")},"spam"),e.jsx(r,{onClick:()=>i(a.id),variant:"delete",icon:"fa-trash-can",size:"xs",as:"button",children:t("bin")},"bin")):s==="spam"?n.push(e.jsx(r,{onClick:()=>u(a.id),variant:"success",icon:"fa-undo",size:"xs",as:"button",children:t("restore")},"restore"),e.jsx(r,{onClick:()=>i(a.id),variant:"delete",icon:"fa-trash-can",size:"xs",as:"button",children:t("bin")},"bin")):s==="bin"?n.push(e.jsx(r,{onClick:()=>u(a.id),variant:"success",icon:"fa-undo",size:"xs",as:"button",children:t("restore")},"restore"),e.jsx(r,{onClick:()=>m(a.id),variant:"warning",icon:"fa-exclamation-circle",size:"xs",as:"button",children:t("spam")},"spam"),e.jsx(r,{onClick:()=>P(a.id),variant:"delete",icon:"fa-trash-can",size:"xs",as:"button",children:t("delete_permanently")},"delete")):n.push(e.jsx(r,{onClick:()=>i(a.id),variant:"delete",icon:"fa-trash-can",size:"xs",as:"button",children:t("bin")},"bin")),n};return e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"px-3 py-4 whitespace-nowrap text-sm text-neutral-900 dark:text-neutral-100",children:a.row_number}),e.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:"fa-solid fa-user text-blue-500"}),e.jsx("span",{className:`text-sm font-medium text-neutral-900 dark:text-neutral-100 ${a.is_read?"font-normal":"font-bold"}`,children:a.from_name||a.from_email})]}),a.from_name&&e.jsx("span",{className:"text-xs text-neutral-500 dark:text-neutral-400 mx-6",children:a.from_email})]})}),e.jsx("td",{className:"px-3 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[s==="inbox"&&a.folder!=="inbox"&&e.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${M(a.folder)}`,children:t(a.folder)}),e.jsx("span",{className:`text-sm text-neutral-900 dark:text-neutral-100 truncate max-w-xs ${a.is_read?"font-normal":"font-bold"}`,children:a.subject})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-neutral-500 dark:text-neutral-400",children:a.received_at||a.created_at}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{onClick:()=>B(a.id,a.is_starred),className:"hover:scale-110 transition-transform duration-200",children:a.is_starred?e.jsx("i",{className:"fa-solid fa-star text-yellow-500 text-lg hover:text-yellow-600"}):e.jsx("i",{className:"fa-regular fa-star text-gray-400 text-lg hover:text-yellow-500"})}),e.jsx("button",{onClick:()=>T(a.id,a.is_read),className:"hover:scale-110 transition-transform duration-200",title:a.is_read?t("mark_as_unread"):t("mark_as_read"),children:a.is_read?e.jsx("i",{className:"fa-solid fa-envelope-open text-blue-500 text-lg hover:text-blue-600"}):e.jsx("i",{className:"fa-solid fa-envelope text-green-500 text-lg hover:text-green-600"})}),(!["archive","starred","spam","bin"].includes(s)||s==="archive")&&e.jsx("button",{onClick:()=>O(a.id,a.is_archived),className:"hover:scale-110 transition-transform duration-200",title:a.is_archived?t("unarchive"):t("archive"),children:a.is_archived?e.jsx("i",{className:"fa-solid fa-undo text-purple-500 text-lg hover:text-purple-600"}):e.jsx("i",{className:"fa-solid fa-archive text-purple-500 text-lg hover:text-purple-600"})}),x()]})})]})},N=(a,x,n)=>n?"":a.is_read?"bg-green-100/60 dark:bg-green-800/30 hover:bg-green-200/50 dark:hover:bg-green-700/20":"bg-green-50/80 dark:bg-green-900/40 hover:bg-green-100/60 dark:hover:bg-green-800/30";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("h2",{className:"text-2xl font-bold leading-tight text-neutral-900 dark:text-neutral-100 flex items-center gap-2",children:[e.jsx("i",{className:`fa-solid ${F(s)}`}),S(s,t)]})}),e.jsx("div",{className:"mb-4",children:e.jsx(C,{placeholder:t("search"),defaultValue:o.search||"",queryKey:"search",routeName:"user.email-agent.emails",routeParams:{folder:s},icon:"fa-magnifying-glass",pageParam:"page"})}),e.jsx(w,{columns:v,data:l.data,renderRow:_,pagination:l,routeName:"user.email-agent.emails",queryParams:{...o,folder:s},sortOptions:j,defaultSortField:"created_at",defaultSortDirection:"desc",getRowClassName:N,bulkActions:y(s,t,b),pageParam:"page",MoreButtons:e.jsx(e.Fragment,{children:e.jsxs("div",{className:"flex gap-3 justify-center",children:[c==="gmail"&&e.jsx(r,{onClick:E,icon:"fa-envelope",variant:"delete",size:"sm",children:t("fetch_emails")}),c==="outlook"&&e.jsx(r,{onClick:A,icon:"fa-envelope-open",variant:"info",size:"sm",children:t("fetch_emails")})]})})}),e.jsx(z,{isOpen:h,onClose:()=>d(!1),selectedEmails:p,currentFolder:s})]})}export{W as default};
