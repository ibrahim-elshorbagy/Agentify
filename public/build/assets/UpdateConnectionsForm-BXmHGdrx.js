import{j as e,b as m,r as u,a as k}from"./app--jV6bvDR.js";import{u as y}from"./useTrans-BkTq1qdy.js";import{P as f}from"./PrimaryButton-D-rdEY4J.js";import{S as g}from"./SecondaryButton-CZlMYec_.js";function h({className:r="",disabled:s,children:t,...n}){return e.jsx("button",{...n,className:`inline-flex items-center rounded-md border border-transparent bg-red-600 px-4 py-2 text-xs font-semibold uppercase tracking-widest text-white transition duration-150 ease-in-out hover:bg-red-500 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2 active:bg-red-700 dark:focus:ring-offset-gray-800 ${s&&"opacity-25"} `+r,disabled:s,children:t})}function C({className:r=""}){const{t:s}=y();m().props.auth.user;const[t,n]=u.useState(!1),{hasGmailConnected:p,hasOutlookConnected:b}=m().props,[c,j]=u.useState({google:p||!1,outlook:b||!1}),l=o=>{n(!0),window.location.href=route("connections.connect",{provider:o})},d=o=>{confirm(s("confirm_disconnect_provider",{provider:o==="google"?"Gmail":"Outlook"}))&&k.delete(route("connections.disconnect",{provider:o}),{onStart:()=>n(!0),onFinish:()=>n(!1),onSuccess:()=>{j(a=>({...a,[o]:!1}))}})},x=async o=>{try{n(!0);const i=await(await fetch(route("connections.test",{provider:o}))).json();i.success,alert(i.message)}catch(a){console.error("Test connection failed:",a),alert(s("connection_test_failed"))}finally{n(!1)}};return e.jsxs("section",{className:r,children:[e.jsxs("header",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100",children:s("email_connections")}),e.jsx("p",{className:"mt-1 text-sm text-gray-600 dark:text-gray-400",children:s("connect_email_accounts_description")})]}),e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("i",{className:"fab fa-google text-2xl text-red-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Gmail"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c.google?s("connected"):s("not_connected")})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:c.google?e.jsxs(e.Fragment,{children:[e.jsx(g,{type:"button",onClick:()=>x("google"),disabled:t,icon:"fa-plug-circle-check",className:"min-w-[180px]",children:s("test_connection")}),e.jsx(h,{type:"button",onClick:()=>d("google"),disabled:t,icon:"fa-unlink",className:"min-w-[180px]",children:s("disconnect")})]}):e.jsx(f,{type:"button",onClick:()=>l("google"),disabled:t,icon:"fa-link",className:"min-w-[180px]",children:s("connect_gmail")})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 dark:border-gray-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("i",{className:"fab fa-microsoft text-2xl text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:"Outlook"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c.outlook?s("connected"):s("not_connected")})]})]}),e.jsx("div",{className:"flex items-center space-x-2",children:c.outlook?e.jsxs(e.Fragment,{children:[e.jsx(g,{type:"button",onClick:()=>x("outlook"),disabled:t,icon:"fa-plug-circle-check",className:"min-w-[180px]",children:s("test_connection")}),e.jsx(h,{type:"button",onClick:()=>d("outlook"),disabled:t,icon:"fa-unlink",className:"min-w-[180px]",children:s("disconnect")})]}):e.jsx(f,{type:"button",onClick:()=>l("outlook"),disabled:t,icon:"fa-link",className:"min-w-[180px]",children:s("connect_outlook")})})]})]}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("i",{className:"fas fa-info-circle text-blue-400"})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:s("about_email_connections")}),e.jsx("div",{className:"mt-2 text-sm text-blue-700 dark:text-blue-300",children:e.jsx("p",{children:s("email_connections_description")})})]})]})})]})}export{C as default};
